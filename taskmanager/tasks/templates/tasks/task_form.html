{% extends 'tasks/base.html' %}
{% load static %}

{% block title %}
    {% if is_edit %}Редагувати задачу{% else %}Створити задачу{% endif %}
{% endblock %}

{% block content %}
<div class="container py-4">
    <h2 class="mb-4 text-center">
        {% if is_edit %}<i class="bi bi-pencil-fill"></i> Редагувати задачу{% else %}<i class="bi bi-file-earmark-plus-fill"></i> Створити нову задачу{% endif %}
    </h2>

    <form method="post" class="mx-auto" style="max-width: 600px;">
    {% csrf_token %}
    {% if form.errors %}
      <div class="alert alert-danger">
        <strong><i class="bi bi-exclamation-circle-fill"></i> Помилка:</strong> Будь ласка, виправте помилки нижче.
      </div>
    {% endif %}
    
    {{ form.title.label_tag }}
    {{ form.title }}

    {{ form.description.label_tag }}
    {{ form.description }}

    {{ form.status.label_tag }}
    {{ form.status }}

    {{ form.due_date.label_tag }}
    {{ form.due_date }}

    <div class="mb-3 position-relative" style="max-width: 600px;">
        {{ form.tags_input.label_tag }}
        {{ form.tags_input }}
        <div id="tag-suggestions"
             class="list-group position-absolute w-100 shadow-sm"
             style="top: 100%; left: 0; z-index: 1050; max-height: 200px; overflow-y: auto;">
        </div>
    </div>
        <button type="submit" class="btn btn-success">
            {% if is_edit %}<i class="bi bi-floppy2-fill"></i> Зберегти зміни{% else %}<i class="bi bi-check2"></i> Створити задачу{% endif %}
        </button>
        <a href="{% url 'task_list' %}" class="btn btn-danger"><i class="bi bi-arrow-bar-left"></i> Скасувати</a>
    </div>
</form>
</div>
{% endblock %}
{% block scripts %}
    <script src="{% static 'tasks/js/tags_autocomplete.js' %}"></script>
{% endblock %}
